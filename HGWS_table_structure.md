
# HGWS表结构

## 顾客模组

tb_order 订单表

列名|类型|含义|约束
-|-|-|-
orderno|number(20)|订单号|pk
genetime|date|订单生成时间|
accid|varchar2(30)|账号|fk
orderstat|char(1)|状态(1正常、2申请取消、3取消中、0已取消)|
paid|char(1)|是否已支付|

cs_account 账号表

列名|类型|含义|约束
-|-|-|-
accid|varchar2(30)|账号|pk
accpwd|varchar2(30)|密码|

tb_address 收货地址表

列名|类型|含义|约束
-|-|-|-
accid|varchar2(30)|账号|pk
name|varchar2(20)|收货人|
address|varchar2(100)|收货地址|
mobile|varchar2(11)|手机号码|


## 店铺模组

bu_account 商家账号表

列名|类型|含义|约束
-|-|-|-
accid|varchar2(30)|账号|pk
accpwd|varchar2(30)|密码


bu_type 分类表

列名|类型|含义|约束
-|-|-|-
typeid|number(10)|商品分类编号|
typename|varchar(20)|分类名称|
p_typeid|number(5)|父分类编号|

```
分类表:
(商品分类编号, 分类名称, 父分类编号)
(1, 男装, 0)
(2, 裤子, 1)
(3, 外套, 1)
(4, 内裤, 1)
(5, 袜子, 1)

(1, 水果礼盒, 0)
(2, 单品水果, 0)
(21, 苹果, 2)
(22, 香蕉, 2)
(23, 提子, 2)
(24, 梨子, 2)
(25, 柑橘类, 2)

商品表:
(商品编号, 商品名称, 商品分类编号, 卖家编号, SPU销量, 评论数)
(1, '裤子名', 2, 1, 0)
(2, '外套名', 3, 1, 0)
(3, '内裤名', 4, 1, 0)
(4, '袜子名', 5, 1, 0)

(1, '苹果名', 21, 1, 0)
(2, '香蕉名', 22, 1, 0)
(3, '提子名', 23, 1, 0)
(4, '梨子名', 24, 1, 0)

SKU表(库存表):
(SKU编号, 商品编号, SKU属性, 价格, 库存, SKU销量)
(1, 1, [1:1,2:3], 99, 400, 0) 其中 [1:1,2:3] 表示 "颜色为黑色,尺码为X"
(2, 1, [1:1,2:4], 99, 200, 0) 其中 [1:1,2:4] 表示 "颜色为黑色,尺码为XL"
(3, 1, [1:2,2:3], 99, 300, 0) 其中 [1:2,2:3] 表示 "颜色为白色,尺码为X"
(4, 1, [1:2,2:4], 99, 100, 0) 其中 [1:2,2:4] 表示 "颜色为白色,尺码为XL"
上面只列出商品1这个分类的4个SKU.

(1, 1, [1:1,2:3], 99, 400, 0) 其中 [1:1,2:3] 表示 "产地为山东，包装规格为5斤"
(2, 1, [1:1,2:4], 99, 200, 0) 其中 [1:1,2:4] 表示 "产地为山东，包装规格为10斤"
(3, 1, [1:2,2:3], 99, 300, 0) 其中 [1:2,2:3] 表示 "产地为陕西，包装规格为5斤"
(4, 1, [1:2,2:4], 99, 100, 0) 其中 [1:2,2:4] 表示 "产地为陕西，包装规格为10斤"
上面只列出商品1这个分类的4个SKU.

属性名:
(属性名编号, 属性名, 商品分类编号, 父属性编号)
(1, 颜色, 2, 0)
(2, 尺码, 2, 0)
(3, 品牌, 2, 0)
上面只列出裤子这个分类的3个属性名.

(1, 产地, 2, 0)
(2, 包装规格, 2, 0)
(3, 品种, 2, 0)
上面只列出苹果这个分类的3个属性名.

属性值:
(属性值编号, 属性值, 属性名编号)
(1, 黑色, 1)
(2, 白色, 1)
(3, X,  2)
(4, XL, 2)
(5, 七匹狼, 3)
(6, 九牧王, 3)
上面只列出裤子这个分类的6个属性值.

(1, 山东, 1)
(2, 陕西, 1)
(3, 5斤,  2)
(4, 10斤, 2)
(5, 富士, 3)
(6, 嘎啦, 3)
上面只列出苹果这个分类的6个属性值.

商品和属性关系表:
(自增编号, 商品编号, 属性名编号, 属性值编号)
(1, 1, 1, 1) 商品1颜色为黑色
(2, 1, 1, 2) 商品1颜色为白色
(3, 1, 2, 3) 商品1尺码为X
(4, 1, 2, 4) 商品1尺码为XL
上面只列出商品1的4个属性关系.

(自增编号, 商品编号, 属性名编号, 属性值编号)
(1, 1, 1, 1) 商品1产地为山东
(2, 1, 1, 2) 商品1产地为陕西
(3, 1, 2, 3) 商品1包装规格为5斤
(4, 1, 2, 4) 商品1包装规格为10斤
上面只列出商品1的4个属性关系.

商品和属性筛选表:
(商品编号, 商品具有的属性值编号)
(1, [1,2,3,4])
用SQL全文检索实现筛选.
如:
select * from 商品表 
inner join 商品和属性筛选表 
on 商品表.商品编号 = 商品和属性筛选表.商品编号
where 商品表.商品分类编号 = 2 
and 商品和属性筛选表.商品具有的属性值编号 MATCH '1 3'
order by 商品表.评论数 DESC LIMIT 10 OFFSET 20;

商品搜索表:
(商品编号, 商品标题和内容)
(1, [无需词典,二元分词])
用SQL全文检索实现搜索.
```
